/* Trade Ledger Table Styles */
.trade-ledger-page {
  max-width: 100%;
  margin: 0 auto;
  padding: 0.5rem;
  background-color: #f7f8fc;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Header */
.trade-ledger-header {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

@media (min-width: 768px) {
  .trade-ledger-header {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }
}

.trade-ledger-header h1 {
  font-size: 1.875rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0;
}

.add-trade-btn {
  background-color: #4361ee;
  color: white;
  border: none;
  padding: 0.35rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  cursor: pointer;
  margin-right: 0.25rem;
  margin-bottom: 0.25rem;
  transition: background-color 0.2s;
  min-width: 50px;
  touch-action: manipulation;
}

.add-trade-btn:hover {
  background-color: #3a0ca3;
}

/* Stats Grid - Ensure 2x2 on mobile, 4 across on larger screens */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* Default to 2 columns for mobile */
  gap: 0.75rem;
  margin-bottom: 1rem;
}

@media (min-width: 768px) { /* For tablets and larger */
  .stats-grid {
    grid-template-columns: repeat(4, 1fr); /* 4 columns for larger screens */
    gap: 1rem;
  }
}

.stat-card {
  background-color: white;
  padding: 1.25rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  text-align: center;
}

.stat-label {
  font-size: 0.875rem;
  color: #6b7280;
  font-weight: 500;
  margin-bottom: 0.5rem;
}

.stat-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1f2937;
}

.stat-value.positive {
  color: #10b981;
}

.stat-value.negative {
  color: #ef4444;
}

/* Filter Bar */
.filter-bar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;
  background-color: white;
  padding: 0.75rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  margin-bottom: 1rem;
}

@media (min-width: 768px) {
  .filter-bar {
    justify-content: space-between;
    padding: 1rem;
    gap: 0; /* Reset gap if using space-between */
  }
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1 1 auto;
  min-width: 130px; /* Allow wrapping */
  margin-bottom: 0.25rem; /* Spacing for wrapped items */
}

@media (min-width: 768px) {
  .filter-group {
    flex: 0 1 auto; /* Don't grow/shrink as much on larger screens */
    min-width: auto;
    margin-bottom: 0;
  }
}

.filter-group label {
  font-size: 0.875rem;
  color: #4b5563;
  font-weight: 500;
}

.filter-group select {
  padding: 0.375rem 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 4px;
  font-size: 0.875rem;
  background-color: white;
  cursor: pointer;
}

.filter-group select:focus {
  outline: none;
  border-color: #4361ee;
}

.sort-direction {
  background: none;
  border: none;
  font-size: 1rem;
  cursor: pointer;
  padding: 0.25rem;
  color: #6b7280;
}

.sort-direction:hover {
  color: #4361ee;
}

.filter-group input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.sync-info {
  font-size: 0.75rem;
  color: #6b7280;
  margin-top: 0.5rem; /* Add some space if filters wrap */
}

@media (min-width: 768px) {
  .sync-info {
    margin-top: 0;
  }
}


/* Table Container */
.trades-table-container {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Trades Table */
.trades-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 800px; /* Ensure minimum width for horizontal scrolling on small screens */
}

.trades-table th,
.trades-table td {
  padding: 0.6rem 0.4rem; /* Slightly reduced padding */
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
  font-size: 0.8rem; /* Slightly smaller font for table */
  white-space: nowrap; /* Prevent text wrapping in cells */
}

.trades-table th {
  background-color: #f9fafb;
  font-weight: 600;
  color: #374151;
}

.trades-table tbody tr:hover {
  background-color: #f9fafb;
}

/* Specific column styling */
.trades-table .level-badge {
  padding: 0.2rem 0.4rem;
  font-size: 0.7rem;
}

.trades-table .status-badge {
  padding: 0.2rem 0.4rem;
  font-size: 0.7rem;
}

/* Level Badges */
.level-badge {
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
  display: inline-block;
  text-transform: capitalize;
}

.level-badge.level-0-dte { background-color: #e0f2fe; color: #0284c7; }
.level-badge.level-1-dte { background-color: #dcfce7; color: #16a34a; }
.level-badge.level-2-dte { background-color: #fef9c3; color: #ca8a04; }
.level-badge.level-3-dte { background-color: #fee2e2; color: #dc2626; }
.level-badge.level-escalated { background-color: #fecdd3; color: #be123c;}
.level-badge.level-custom { background-color: #e5e7eb; color: #4b5563; }


/* Status Badges */
.status-badge {
  padding: 0.25rem 0.6rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  display: inline-block; /* Ensures badges behave well */
}

.status-badge.open {
  background-color: #dcfce7; /* Light green */
  color: #166534; /* Darker green text */
}

.status-badge.closed {
  background-color: #f3f4f6; /* Light gray */
  color: #4b5563; /* Darker gray text */
}

.spx-close {
  font-weight: 500;
}

.spx-close.breach {
  color: #ef4444; /* Red for breach */
}

.check-mark {
  color: #10b981; /* Green check for max profit */
  margin-left: 0.25rem;
}

/* P&L */
.pnl {
  font-weight: 600;
}

.pnl.positive, .series-pnl.positive, .trade-card-pnl-value.positive {
  color: #10b981; /* Green for positive P&L */
}

.pnl.negative, .series-pnl.negative, .trade-card-pnl-value.negative {
  color: #ef4444; /* Red for negative P&L */
}

/* Action Buttons */
.action-btn {
  padding: 0.25rem 0.5rem;
  margin-right: 0.25rem;
  border: none;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  background-color: #4361ee; /* Primary button color */
  color: white;
  transition: background-color 0.2s;
}

.action-btn:hover {
  background-color: #3a0ca3; /* Darker shade on hover */
}

.action-btn.delete {
  background-color: #fee2e2; /* Light red for delete */
  color: #991b1b; /* Darker red text */
}

.action-btn.delete:hover {
  background-color: #fecaca; /* Slightly darker red on hover */
}

.action-btn.close-btn {
  background-color: #ffedd5; /* Light orange for close */
  color: #9a3412; /* Darker orange text */
}
.action-btn.close-btn:hover {
  background-color: #fed7aa;
}


/* Loading Overlay */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.8);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #f3f3f3; /* Light grey track */
  border-top: 5px solid #4361ee; /* Blue spinner */
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Error Message */
.error-message {
  background-color: #fee2e2;
  border: 1px solid #fecaca;
  color: #b91c1c;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.error-message button {
  background: none;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
  color: #b91c1c;
}

/* Responsive Card View for Mobile - TradeLedger.tsx uses isMobile state for this */
@media (max-width: 767px) {
  /* STATS GRID - ensure it's 2x2 on mobile */
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .trade-ledger-header {
    flex-direction: column;
    gap: 1rem; /* Increased gap for stacked items */
    align-items: stretch; /* Make items like button full width */
  }

  .trade-ledger-header h1 {
    text-align: center; /* Center title on mobile */
  }
  
  .add-trade-btn {
    width: 100%; /* Make button full width on mobile */
    padding: 0.6rem; /* Larger padding for easier tap */
    font-size: 0.9rem;
  }

  .filter-bar {
    flex-direction: column;
    align-items: stretch; /* Make filter groups full width */
    gap: 0.75rem;
  }

  .filter-group {
    justify-content: space-between; /* Distribute items in filter group */
    width: 100%;
  }
  .filter-group select {
    flex-grow: 1; /* Allow select to take available space */
  }
  
  /* Hide desktop table, show mobile cards container */
  .trades-table-container {
    display: none; 
  }
  .trades-cards-container {
    display: flex; /* This should already be set if using isMobile state */
    flex-direction: column;
    gap: 1rem; 
    padding-top: 1rem;
  }

  .series-card {
    background-color: #f8f9fa; 
    border-radius: 8px;
    padding: 0.75rem 1rem;
    border-left: 4px solid #4361ee; 
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  }

  .series-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem; 
  }

  .series-title {
    font-weight: 600;
    font-size: 0.95rem;
    color: #374151; 
  }
  
  .series-pnl-mobile { /* Class for P&L in series card header */
    font-weight: 600;
    font-size: 0.9rem;
  }
  /* Positive/Negative colors for series P&L are handled by general .positive/.negative */

  .trade-card {
    background-color: white;
    border-radius: 8px;
    border: 1px solid #e5e7eb; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    overflow: hidden; 
  }

  .trade-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem; 
    background-color: #f9fafb; 
    border-bottom: 1px solid #e5e7eb;
  }

  .trade-card-date-level {
    display: flex;
    flex-direction: column; 
    gap: 0.1rem;
  }

  .trade-card-date {
    font-size: 0.8rem;
    color: #6b7280;
  }
  
  .trade-card-type { /* For Trade Type in header */
    font-size: 0.85rem;
    font-weight: 500;
    color: #374151;
    text-transform: capitalize;
    text-align: right; /* Align to right if space allows */
  }

  .trade-card-body {
    padding: 0.75rem 1rem; 
    display: grid;
    grid-template-columns: 1fr 1fr; /* Two columns for details */
    gap: 0.75rem 1rem; /* row-gap column-gap */
    font-size: 0.85rem; 
  }

  .trade-card-detail-group {
    display: flex;
    flex-direction: column; 
    gap: 0.2rem;
  }
  
  .trade-card-label {
    font-size: 0.75rem;
    color: #6b7280; 
    font-weight: 500;
  }

  .trade-card-value {
    font-weight: 500;
    color: #1f2937;
    word-break: break-word; /* Prevent long values from breaking layout */
  }
  
  .trade-card-value .spx-close.breach { color: #ef4444; font-weight: bold; }
  .trade-card-value .check-mark { color: #10b981; margin-left: 0.2rem; }

  .trade-card-status-pnl {
    grid-column: 1 / -1; /* Make this span both columns */
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.75rem; 
    padding-top: 0.75rem; 
    border-top: 1px dashed #e5e7eb; 
  }
  .trade-card-status-pnl > div { /* Target children divs for status and P&L */
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Align label/value within each group */
  }
  .trade-card-status-pnl .status-badge { /* Ensure status badge in card is styled */
     margin-top: 0.1rem; /* Space between label and badge */
  }
  
  .trade-card-notes {
    grid-column: 1 / -1; /* Span full width */
    margin-top: 0.75rem;
  }
  .trade-card-notes-content {
    font-size: 0.8rem;
    color: #4b5563;
    background-color: #f9fafb;
    padding: 0.5rem;
    border-radius: 4px;
    white-space: pre-wrap; 
    word-break: break-word;
    margin-top: 0.2rem;
  }

  .trade-card-footer {
    padding: 0.75rem 1rem;
    background-color: #f9fafb; 
    border-top: 1px solid #e5e7eb;
    display: flex;
    justify-content: flex-end; 
    gap: 0.5rem; 
  }
  
  .trade-card-actions { /* Wrapper for buttons if needed, or style buttons directly */
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap; /* Allow buttons to wrap if not enough space */
    justify-content: flex-end;
  }

  .trade-card .action-btn { /* Ensure action buttons in cards are styled */
    padding: 0.35rem 0.6rem;
    font-size: 0.75rem;
    flex-grow: 1; /* Allow buttons to grow if few */
    min-width: 60px; /* Minimum width for tap targets */
  }
  @media (min-width: 360px) { /* Slightly wider screens, buttons might not need to grow as much */
    .trade-card .action-btn {
      flex-grow: 0;
    }
  }
}

/* Fallback for desktop-only/mobile-only if not using JS to toggle visibility */
/* These are less critical if your component's `isMobile` state correctly swaps content */
.desktop-only {
  display: block; /* Or initial display type */
}
.mobile-only {
  display: none;
}

@media (max-width: 767px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: block !important; /* Or flex, grid, etc., as appropriate for the element */
  }
}